<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" type="image/png" href="https://i.imgur.com/FEke8Cf.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeRun Market - Votre MarchÃ© Ã  Antananarivo</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div id="user-sidebar" class="sidebar">
    <button class="close-sidebar" onclick="toggleSidebar()">Ã—</button>
   <div class="user-profile">
    <div class="user-avatar" id="user-initials">S</div> 
    <h3 id="side-user-nom">Utilisateur</h3>
    <p id="side-user-tel" style="font-size: 0.9rem; color: #ffcc00; margin-bottom: 5px;">
        <i class="fas fa-phone"></i> NumÃ©ro non renseignÃ©
    </p>
    <p id="side-user-quartier"><i class="fas fa-map-marker-alt"></i> Quartier, Antananarivo</p>
    
    <button onclick="ouvrirInscription()" style="background: none; border: 1px solid #555; color: #ccc; font-size: 0.7rem; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
        Modifier mon profil
    </button>
</div>
    
    <nav class="sidebar-nav">
        <a href="#" class="nav-item active"><i class="fas fa-bolt"></i> <div><span>Livraison Express</span><small>Moins de 24h</small></div></a>
        <a href="javascript:void(0)" class="nav-item" onclick="ouvrirPlanification('Achat PlanifiÃ©')">
        <i class="fas fa-clock"></i> <span>Achat PlanifiÃ©</span> </a>       
        <a href="javascript:void(0)" class="nav-item" onclick="ouvrirLivraisons()">
        <i class="fas fa-truck-loading"></i> 
        <span>Livraison en cours</span>
        <span id="badge-livraison" class="badge-notif" style="display: none;">0</span>
        </a>
        <a href="#" class="nav-item"><i class="fas fa-check-circle"></i> <span>Achats validÃ©s</span><span class="notif-badge">0</span></a>
        <a href="javascript:void(0)" class="nav-item" onclick="contacterAssistance()">
    <i class="fab fa-whatsapp"></i> 
    <div>
        <span>Assistance WhatsApp</span>
        <small>RÃ©ponse rapide</small>
    </div>
</a>  
    </nav>
    </div>
    <div class="top-announcement">
        <div class="scrolling-text">
            âš¡ Livraison rapide sur tout Antananarivo â€” ğŸ›ï¸ QualitÃ© PPN garantie â€” ğŸ“ Service client : +261 38 24 536 10 â€” ğŸ“¦ Paiement sÃ©curisÃ© Ã  la livraison 
        </div>
    </div>

    <header>
        <div class="header-container">
            <div class="logo-area">
    <img src="https://i.imgur.com/FEke8Cf.png" alt="Logo SafeRunMarket" class="logo-img"> <div class="logo-text">
        SAFERUN <span>MARKET</span>
    </div>
</div>

            <div class="nav-elements">
                <div class="search-wrapper">
                    <i class="fas fa-search search-icon-inside"></i>
                    <input type="text" id="search" placeholder="Rechercher un produit...">
                </div>
                
                <div class="header-icons">
                    <div class="icon-item">
                        <i class="fas fa-user"></i>
                        <span class="icon-label">Compte</span>
                    </div>
                    <div class="icon-item cart-trigger" onclick="envoyerCommande()" style="cursor:pointer;">
                     <i class="fas fa-shopping-cart"></i>
                     <span class="cart-badge" id="cart-count" style="display:none;">0</span>
                     <span class="icon-label">Panier</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="promo-slider">
        <div class="slide active">
            <div class="slide-content">
                <h2>LE MARCHÃ‰ SANS SE DÃ‰PLACER ğŸ </h2>
                <p>Vos PPN livrÃ©s chez vous avec le sourire en moins de 2h.</p>
                <button class="btn-promo" onclick="document.getElementById('search').focus()">Voir les produits</button>
            </div>
        </div>
        <div class="slide">
            <div class="slide-content">
                <h2>RIZ GASY & HUILE DE QUALITÃ‰ ğŸš</h2>
                <p>Le meilleur prix sur les produits essentiels Ã  Antananarivo.</p>
                <button class="btn-promo">Profiter des offres</button>
            </div>
        </div>
    </section>
<section class="promo-slider">
    <div class="slide active" style="display: flex; align-items: center; justify-content: space-between; padding: 0 10%;">
        <div class="slide-content" style="flex: 1;">
            <h2>LE MARCHÃ‰ SANS SE DÃ‰PLACER ğŸ </h2>
            <p>Vos PPN livrÃ©s chez vous avec le sourire en moins de 2h.</p>
            <button class="btn-promo" onclick="document.getElementById('search').focus()">Voir les produits</button>
        </div>
        <div class="slide-image" style="flex: 1; text-align: right; display: none; display: md-block;"> 
            <img src="https://i.imgur.com/BQMqwqv.png" alt="Livreur SafeRun" style="width: 100%; max-width: 350px; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));">
        </div>
    </div>
</section>
    <section class="trust-badges">
        <div class="badge-item">
            <i class="fas fa-truck-fast"></i>
            <span>Livraison Express</span>
        </div>
        <div class="badge-item">
            <i class="fas fa-shield-halved"></i>
            <span>QualitÃ© ContrÃ´lÃ©e</span>
        </div>
        <div class="badge-item">
            <i class="fas fa-hand-holding-dollar"></i>
            <span>Payez Ã  la livraison</span>
        </div>
    </section>
    <div class="category-filter-container">
    <button class="cat-btn active" onclick="filtrerParCategorie('Tous')">ğŸ›’ Tous</button>
    <button class="cat-btn" onclick="filtrerParCategorie('PPN')">ğŸš P.P.N</button>
    <button class="cat-btn" onclick="filtrerParCategorie('Alimentaire')">ğŸ Alimentaire</button>
    <button class="cat-btn" onclick="filtrerParCategorie('Conserves')">ğŸ¥« Conserves</button>
    <button class="cat-btn" onclick="filtrerParCategorie('Frais')">ğŸ¥¦ Frais</button>
    <button class="cat-btn" onclick="filtrerParCategorie('Hygiene')">ğŸ§¼ HygiÃ¨ne</button>
    <button class="cat-btn" onclick="filtrerParCategorie('Energie')">ğŸ”‹ Ã‰nergie</button>
    </div>
    <div id="boutique-section">
        <div id="status-planif" style="display:none; background: #e8f4fd; color: #2980b9; padding: 15px; text-align: center; font-weight: bold; border-radius: 10px; margin: 10px auto; max-width: 90%;">
    <i class="fas fa-calendar-check"></i> Livraison prÃ©vue le : <span id="date-affichage"></span>
    <button onclick="annulerPlanif()" style="background:none; border:none; color:red; cursor:pointer; margin-left:10px; text-decoration:underline;">[Annuler]</button>
</div>
        <div class="section-title">
            <h2>ğŸ›’ Nos Produits</h2>
            <div class="underline"></div>
        </div>
        <main id="boutique" class="container">
            <p>Chargement de votre marchÃ© en cours...</p>
        </main>
    </div>

    <footer class="footer-premium">
        <div class="footer-waves"></div>
        <div class="footer-container">
            <div class="footer-brand">
                <img src="https://i.imgur.com/FEke8Cf.png" alt="Logo SafeRun" class="footer-logo">
                <h3>SAFERUN <span>MARKET</span></h3>
                <p>La qualitÃ© et les prix bas livrÃ©s chez vous Ã  Antananarivo.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>

            <div class="footer-links">
                <h4>Nos Services</h4>
                <ul>
                    <li><a href="#">Livraison Express</a></li>
                    <li><a href="#">Produits Frais</a></li>
                    <li><a href="#">Paiement Cash</a></li>
                </ul>
            </div>

            <div class="footer-contact">
                <h4>Contact Direct</h4>
                <p><i class="fas fa-phone-alt"></i> +261 38 24 536 10</p>
                <p><i class="fas fa-envelope"></i> contact@saferunmarket.mg</p>
                <p><i class="fas fa-map-marker-alt"></i> Analamanga, Antananarivo</p>
            </div>
        </div>
        <div class="footer-copyright">
            <p>Â© 2026 SafeRun Market. DÃ©veloppÃ© avec â¤ï¸ pour Madagascar.</p>
        </div>
    </footer>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        function nextSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }
        setInterval(nextSlide, 5000); // Change toutes les 5 secondes
    </script>
    
    <div id="welcome-popup" class="welcome-popup">
    <div class="popup-content">
        <button class="close-popup" onclick="fermerPopup()">Ã—</button>
        <div class="popup-icon">ğŸ‘‹</div>
        <h4>Besoin d'aide ?</h4>
        <p>Devenez notre client privilÃ©giÃ© pour commander plus rapidement !</p>
        <button class="btn-inscription" onclick="ouvrirInscription()">S'INSCRIRE MAINTENANT</button>
    </div>
    </div>

    <div id="modal-panier" class="modal-system">
    <div class="modal-box">
        <button class="close-popup" onclick="fermerModal()">Ã—</button>
        <div id="detail-panier" style="text-align: left; margin-top: 20px;"></div>
        <hr>
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem; margin: 15px 0;">
            <span>TOTAL :</span>
            <span id="total-modal">0 Ar</span>
        </div>
        <button class="btn-inscription" onclick="envoyerDonneesAuSheet()">ğŸš€ VALIDER MA COMMANDE</button>
    </div>
</div>

    <div id="modal-rdv" class="welcome-popup" style="display:none; z-index:1100; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center;">
  <div class="popup-content" style="max-width:350px;">
    <button class="close-popup" onclick="fermerRdv()">Ã—</button>
    <h3>ğŸ“… Prendre rendez-vous</h3>
    <p>Indiquez vos coordonnÃ©es et le crÃ©neau souhaitÃ© :</p>
    <input type="text" id="rdv-nom" placeholder="Nom complet" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:8px;">
    <input type="tel" id="rdv-tel" placeholder="TÃ©lÃ©phone" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:8px;">
    <input type="datetime-local" id="rdv-date" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:8px;">
    <textarea id="rdv-commentaire" placeholder="Commentaire (facultatif)" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:8px;"></textarea>
    <button class="btn-inscription" onclick="envoyerRdv()" style="width:100%;">CONFIRMER LE RENDEZ-VOUS</button>
  </div>
</div>

    <div id="modal-planification" class="welcome-popup" style="display:none; z-index: 1100; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div class="popup-content" style="max-width: 350px;">
            <button class="close-popup" onclick="fermerPlanif()">Ã—</button>
            <h3 id="planif-titre">ğŸ“… Planifier</h3>
            <p style="font-size: 0.9rem; color: #666;">Choisissez la date et l'heure de passage souhaitÃ©es.</p>
            <input type="datetime-local" id="date-planif" style="width: 100%; padding: 10px; margin: 15px 0; border: 1px solid #ddd; border-radius: 8px;">
            <button class="btn-inscription" onclick="sauvegarderPlanif()" style="width: 100%;">ENREGISTRER CE CRÃ‰NEAU</button>
        </div>
    </div>
    <div id="modal-livraisons" class="modal-system">
    <div class="modal-box" style="max-height: 80vh; display: flex; flex-direction: column;">
        <button class="close-popup" onclick="fermerLivraisons()">Ã—</button>
        <h3>ğŸšš Mes Livraisons</h3>
        <div id="liste-livraisons" style="text-align: left; margin-top: 15px; flex-grow: 1; overflow-y: auto;"></div>
        <button onclick="viderHistorique()" style="margin-top: 15px; background: none; border: 1px solid #ccc; color: #888; padding: 8px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">
            <i class="fas fa-trash"></i> Effacer l'historique
        </button>
    </div>
</div>

    <script src="js/main.js"></script>

<div id="mvola-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; color:white; text-align:center; padding-top:100px;">
    <div style="background:#fff; color:#333; width:90%; max-width:400px; margin:auto; padding:20px; border-radius:15px;">
        <img src="https://www.mvola.mg/wp-content/uploads/2022/03/logo-mvola.png" width="100">
        <h3 id="status-title">Paiement en cours...</h3>
        <p id="status-text">VÃ©rifiez votre tÃ©lÃ©phone, une demande de paiement a Ã©tÃ© envoyÃ©e.</p>
        <div class="loader">ğŸ”„</div> <p style="font-size:12px; color:gray;">Ne fermez pas cette fenÃªtre avant la fin de la transaction.</p>
    </div>
</div>
</body>
</html>